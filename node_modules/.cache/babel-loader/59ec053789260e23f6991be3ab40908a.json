{"ast":null,"code":"import _toConsumableArray from\"C:/Users/kobys/Desktop/sandbox1/TODO-List/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"C:/Users/kobys/Desktop/sandbox1/TODO-List/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/kobys/Desktop/sandbox1/TODO-List/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/kobys/Desktop/sandbox1/TODO-List/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/kobys/Desktop/sandbox1/TODO-List/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import AppHeader from\"../app-header\";import TodoList from\"../todo-list\";import ItemStatusFilter from\"../item-status-filter\";import ItemAddForm from\"../item-add-form\";import\"./style.css\";import routes from'../../routes.js';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={todoData:[],filter:'all'};_this.onItemUpdated=function(){axios.get(routes.todosPath()).then(function(resp){_this.setState({todoData:resp.data});}).catch(function(error){console.log(\"network error\"+error);});};_this.addItem=function(label){axios.post(routes.todosPath(),{label:label,done:false}).then(function(resp){var newItem={id:resp.data.id,label:resp.data.label,done:resp.data.done};_this.setState(function(_ref){var todoData=_ref.todoData;var newArray=[].concat(_toConsumableArray(todoData),[newItem]);return{todoData:newArray};});});};_this.onItemDeleted=function(id){var withoutDeletedItem=_this.state.todoData.filter(function(el){return el.id!==id;});_this.setState({todoData:withoutDeletedItem});};_this.onFilterChange=function(filter){_this.setState({filter:filter});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){this.onItemUpdated();}},{key:\"filter\",value:function filter(items,_filter){switch(_filter){case'all':return items;case'active':return items.filter(function(item){return!item.done;});case'done':return items.filter(function(item){return item.done;});default:return items;}}},{key:\"render\",value:function render(){var _this$state=this.state,todoData=_this$state.todoData,filter=_this$state.filter;var visibleItems=this.filter(todoData,filter);var doneCount=todoData.filter(function(el){return el.done;}).length;var todoCount=todoData.length-doneCount;return/*#__PURE__*/_jsxs(\"div\",{className:\"todo-app\",children:[/*#__PURE__*/_jsx(AppHeader,{toDo:todoCount,done:doneCount}),/*#__PURE__*/_jsx(\"div\",{className:\"top-panel d-flex\",children:/*#__PURE__*/_jsx(ItemStatusFilter,{filter:filter,onFilterChange:this.onFilterChange})}),/*#__PURE__*/_jsx(TodoList,{todos:visibleItems,onItemUpdated:this.onItemUpdated,onItemDeleted:this.onItemDeleted}),/*#__PURE__*/_jsx(ItemAddForm,{onItemAdded:this.addItem})]});}}]);return App;}(Component);export{App as default};","map":{"version":3,"names":["React","Component","AppHeader","TodoList","ItemStatusFilter","ItemAddForm","routes","axios","App","state","todoData","filter","onItemUpdated","get","todosPath","then","resp","setState","data","catch","error","console","log","addItem","label","post","done","newItem","id","newArray","onItemDeleted","withoutDeletedItem","el","onFilterChange","items","item","visibleItems","doneCount","length","todoCount"],"sources":["C:/Users/kobys/Desktop/sandbox1/TODO-List/src/components/app/index.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport AppHeader from \"../app-header\";\r\nimport TodoList from \"../todo-list\";\r\nimport ItemStatusFilter from \"../item-status-filter\";\r\nimport ItemAddForm from \"../item-add-form\";\r\nimport \"./style.css\";\r\nimport routes from '../../routes.js';\r\nimport axios from \"axios\";\r\nexport default class App extends Component {\r\n\r\n    state = {\r\n        todoData: [],\r\n        filter: 'all',\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.onItemUpdated()\r\n    }\r\n\r\n    onItemUpdated = () => {\r\n        axios.get(routes.todosPath()).then((resp) => {\r\n            this.setState({ todoData: resp.data })\r\n        })\r\n            .catch(function (error) {\r\n                console.log(\"network error\" + error);\r\n            });\r\n    };\r\n\r\n    addItem = (label) => {\r\n        axios.post(routes.todosPath(), { label: label, done: false }).then((resp) => {\r\n            let newItem = {\r\n                id: resp.data.id,\r\n                label: resp.data.label,\r\n                done: resp.data.done\r\n            }\r\n            this.setState(({ todoData }) => {\r\n                const newArray = [...todoData, newItem];\r\n                return {\r\n                    todoData: newArray,\r\n                };\r\n            });\r\n        });\r\n    }\r\n\r\n    onItemDeleted = (id) => {\r\n        const withoutDeletedItem = this.state.todoData.filter((el) => el.id !== id);\r\n        this.setState({\r\n            todoData: withoutDeletedItem\r\n        });\r\n    }\r\n\r\n    onFilterChange = (filter) => {\r\n        this.setState({ filter });\r\n    };\r\n\r\n    filter(items, filter) {\r\n\r\n        switch (filter) {\r\n            case 'all':\r\n                return items;\r\n            case 'active':\r\n                return items.filter((item) => !item.done);\r\n            case 'done':\r\n                return items.filter((item) => item.done);\r\n            default:\r\n                return items;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { todoData, filter } = this.state;\r\n        const visibleItems = this.filter(todoData, filter);\r\n        const doneCount = todoData.filter((el) => el.done).length;\r\n        const todoCount = todoData.length - doneCount;\r\n        return (\r\n            <div className=\"todo-app\">\r\n                <AppHeader\r\n                    toDo={todoCount}\r\n                    done={doneCount} />\r\n                <div className=\"top-panel d-flex\">\r\n                    <ItemStatusFilter\r\n                        filter={filter}\r\n                        onFilterChange={this.onFilterChange} />\r\n                </div>\r\n                <TodoList\r\n                    todos={visibleItems}\r\n                    onItemUpdated={this.onItemUpdated}\r\n                    onItemDeleted={this.onItemDeleted}\r\n                />\r\n                <ItemAddForm onItemAdded={this.addItem} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"],"mappings":"mnBAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,MAAOC,UAAS,KAAM,eAAe,CACrC,MAAOC,SAAQ,KAAM,cAAc,CACnC,MAAOC,iBAAgB,KAAM,uBAAuB,CACpD,MAAOC,YAAW,KAAM,kBAAkB,CAC1C,MAAO,aAAa,CACpB,MAAOC,OAAM,KAAM,iBAAiB,CACpC,MAAOC,MAAK,KAAM,OAAO,CAAC,2FACLC,IAAG,+SAEpBC,KAAK,CAAG,CACJC,QAAQ,CAAE,EAAE,CACZC,MAAM,CAAE,KACZ,CAAC,OAMDC,aAAa,CAAG,UAAM,CAClBL,KAAK,CAACM,GAAG,CAACP,MAAM,CAACQ,SAAS,EAAE,CAAC,CAACC,IAAI,CAAC,SAACC,IAAI,CAAK,CACzC,MAAKC,QAAQ,CAAC,CAAEP,QAAQ,CAAEM,IAAI,CAACE,IAAK,CAAC,CAAC,CAC1C,CAAC,CAAC,CACGC,KAAK,CAAC,SAAUC,KAAK,CAAE,CACpBC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAGF,KAAK,CAAC,CACxC,CAAC,CAAC,CACV,CAAC,OAEDG,OAAO,CAAG,SAACC,KAAK,CAAK,CACjBjB,KAAK,CAACkB,IAAI,CAACnB,MAAM,CAACQ,SAAS,EAAE,CAAE,CAAEU,KAAK,CAAEA,KAAK,CAAEE,IAAI,CAAE,KAAM,CAAC,CAAC,CAACX,IAAI,CAAC,SAACC,IAAI,CAAK,CACzE,GAAIW,QAAO,CAAG,CACVC,EAAE,CAAEZ,IAAI,CAACE,IAAI,CAACU,EAAE,CAChBJ,KAAK,CAAER,IAAI,CAACE,IAAI,CAACM,KAAK,CACtBE,IAAI,CAAEV,IAAI,CAACE,IAAI,CAACQ,IACpB,CAAC,CACD,MAAKT,QAAQ,CAAC,cAAkB,IAAfP,SAAQ,MAARA,QAAQ,CACrB,GAAMmB,SAAQ,8BAAOnB,QAAQ,GAAEiB,OAAO,EAAC,CACvC,MAAO,CACHjB,QAAQ,CAAEmB,QACd,CAAC,CACL,CAAC,CAAC,CACN,CAAC,CAAC,CACN,CAAC,OAEDC,aAAa,CAAG,SAACF,EAAE,CAAK,CACpB,GAAMG,mBAAkB,CAAG,MAAKtB,KAAK,CAACC,QAAQ,CAACC,MAAM,CAAC,SAACqB,EAAE,QAAKA,GAAE,CAACJ,EAAE,GAAKA,EAAE,GAAC,CAC3E,MAAKX,QAAQ,CAAC,CACVP,QAAQ,CAAEqB,kBACd,CAAC,CAAC,CACN,CAAC,OAEDE,cAAc,CAAG,SAACtB,MAAM,CAAK,CACzB,MAAKM,QAAQ,CAAC,CAAEN,MAAM,CAANA,MAAO,CAAC,CAAC,CAC7B,CAAC,gEAtCD,4BAAoB,CAChB,IAAI,CAACC,aAAa,EAAE,CACxB,CAAC,sBAsCD,gBAAOsB,KAAK,CAAEvB,OAAM,CAAE,CAElB,OAAQA,OAAM,EACV,IAAK,KAAK,CACN,MAAOuB,MAAK,CAChB,IAAK,QAAQ,CACT,MAAOA,MAAK,CAACvB,MAAM,CAAC,SAACwB,IAAI,QAAK,CAACA,IAAI,CAACT,IAAI,GAAC,CAC7C,IAAK,MAAM,CACP,MAAOQ,MAAK,CAACvB,MAAM,CAAC,SAACwB,IAAI,QAAKA,KAAI,CAACT,IAAI,GAAC,CAC5C,QACI,MAAOQ,MAAK,CAAC,CAEzB,CAAC,sBAED,iBAAS,CACL,gBAA6B,IAAI,CAACzB,KAAK,CAA/BC,QAAQ,aAARA,QAAQ,CAAEC,MAAM,aAANA,MAAM,CACxB,GAAMyB,aAAY,CAAG,IAAI,CAACzB,MAAM,CAACD,QAAQ,CAAEC,MAAM,CAAC,CAClD,GAAM0B,UAAS,CAAG3B,QAAQ,CAACC,MAAM,CAAC,SAACqB,EAAE,QAAKA,GAAE,CAACN,IAAI,GAAC,CAACY,MAAM,CACzD,GAAMC,UAAS,CAAG7B,QAAQ,CAAC4B,MAAM,CAAGD,SAAS,CAC7C,mBACI,aAAK,SAAS,CAAC,UAAU,wBACrB,KAAC,SAAS,EACN,IAAI,CAAEE,SAAU,CAChB,IAAI,CAAEF,SAAU,EAAG,cACvB,YAAK,SAAS,CAAC,kBAAkB,uBAC7B,KAAC,gBAAgB,EACb,MAAM,CAAE1B,MAAO,CACf,cAAc,CAAE,IAAI,CAACsB,cAAe,EAAG,EACzC,cACN,KAAC,QAAQ,EACL,KAAK,CAAEG,YAAa,CACpB,aAAa,CAAE,IAAI,CAACxB,aAAc,CAClC,aAAa,CAAE,IAAI,CAACkB,aAAc,EACpC,cACF,KAAC,WAAW,EAAC,WAAW,CAAE,IAAI,CAACP,OAAQ,EAAG,GACxC,CAEd,CAAC,iBApF4BtB,SAAS,SAArBO,GAAG"},"metadata":{},"sourceType":"module"}